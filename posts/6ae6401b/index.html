<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="apple-touch-icon" href="/icons-192.png">
  <link rel="manifest" href="/manifest.json">
  


  <meta name="generator" content="Hexo 6.3.0">

  

  
    <meta name="keywords" content="æ¸¸æˆå¼€å‘">
  

  
    <meta name="author" content="kio0o0">
  

  

  

  <title>Unity Shaderå…¥é—¨ç²¾è¦-ç« èŠ‚17 Unityçš„è¡¨é¢ç€è‰²å™¨æ¢ç§˜ | ä¸ç‰¹åˆ«å‘¨ã®Blog</title>

  

  
    <link rel="shortcut icon" href="/favicon.ico">
  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@1.1.3/index.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs@9.16.2/styles/monokai.css">
  

  
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
  <div class="root-container">
    
<!-- header container -->
<header class="header-container post">
  
    <div class="post-image" style="background-image: url(https://raw.githubusercontent.com/kiodyd/image-host/main/PicGo/20230104211338.png)"></div>
  

  <!-- navbar -->
<nav class="navbar">
  <div class="navbar-content">
    <!-- logo -->
    <div class="navbar-logo">
      <a href="/">
        
          ä¸ç‰¹åˆ«å‘¨ã®Blog
        
      </a>
    </div>
    <!-- link -->
    <div class="navbar-link">
      <div class="navbar-btn">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <ul class="navbar-list">
        
          <li class="navbar-list-item"><a href="/">é¦–é¡µ</a></li>
        
          <li class="navbar-list-item"><a href="/talks">å¨å¨</a></li>
        
      </ul>
    </div>
  </div>
</nav>

  
  

  
  

  
  

  
  

  
  
    <div class="header-content">
      <div class="post-text layout-block">
        <div class="layout-margin">
          <h1 class="title-wrap">Unity Shaderå…¥é—¨ç²¾è¦-ç« èŠ‚17 Unityçš„è¡¨é¢ç€è‰²å™¨æ¢ç§˜</h1>
          <h2 class="title-sub-wrap">
            <strong>kio0o0</strong>
            <span>å‘å¸ƒäº</span>
            <time  class="article-date" datetime="2022-10-27T14:33:00.000Z" itemprop="datePublished">2022-10-27</time>
          </h2>
          
            <h2 class="title-sub-wrap new-date">
              <span>æœ€åæ›´æ–°äº</span>
              <time  class="article-updated" datetime="2024-07-14T09:03:59.226Z" itemprop="dateUpdated">2024-07-14</time>
            </h2>
          
          
          <ul class="wrap-list dark">
  
    <li><a href="/categories/%E5%AD%A6%E4%B9%A0/">ğŸ“’ å­¦ä¹ </a></li>
  
</ul>
          <ul class="wrap-list dark">
  
    <li><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">ğŸ·ï¸ å›¾å½¢å­¦</a></li>
  
    <li><a href="/tags/Unity-Shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81/">ğŸ·ï¸ Unity Shaderå…¥é—¨ç²¾è¦</a></li>
  
</ul>
        </div>
      </div>
    </div>
  

  
  
  
</header>

    <!-- æ–‡ç«  -->

<!-- æ–‡ç« å†…å®¹ -->
<div class="body-container">
  <article class="content-container layout-block post-container">
    <div class="article-info">
      
      
      
      
      <section class="article-entry markdown-body layout-margin content-padding--large soft-size--large soft-style--box">
        <p>æ±‚çŸ¥è‹¥é¥¥ï¼Œè™šå¿ƒè‹¥æ„š</p>
<span id="more"></span>
<p>2009å¹´ï¼ŒUnity çš„æ¸²æŸ“å·¥ç¨‹å¸ˆ Arasè¿ç»­å‘è¡¨äº†3ç¯‡åä¸ºã€ŠShaders must dieã€‹çš„åšå®¢ï¼Œåœ¨åšå®¢é‡Œï¼Œä»–è®¤ä¸ºæŠŠæ¸²æŸ“æµç¨‹åˆ†ä¸ºé¡¶ç‚¹å’Œåƒç´ çš„æŠ½è±¡å±‚é¢æ˜¯é”™è¯¯çš„ï¼Œè¿™ç§åœ¨é¡¶ç‚¹/å‡ ä½•/ç‰‡å…ƒç€è‰²å™¨ä¸Šçš„æ“ä½œæ˜¯å¯¹ç¡¬ä»¶å‹å¥½ï¼Œä½†ä¸ç¬¦åˆäººç±»çš„æ€è€ƒæ–¹å¼ï¼Œåº”è¯¥åˆ’åˆ†ä¸ºè¡¨é¢ç€è‰²å™¨ã€å…‰ç…§æ¨¡å‹å’Œå…‰ç…§ç€è‰²å™¨è¿™æ ·çš„å±‚é¢ã€‚</p>
<ul>
<li>è¡¨é¢ç€è‰²å™¨å®šä¹‰äº†æ¨¡å‹è¡¨é¢çš„åå°„ç‡ã€æ³•çº¿å’Œé«˜å…‰ç­‰</li>
<li>å…‰ç…§æ¨¡å‹åˆ™é€‰æ‹©æ˜¯ä½¿ç”¨å…°ä¼¯ç‰¹è¿˜æ˜¯Blinn-Phoneç­‰æ¨¡å‹</li>
<li>å…‰ç…§ç€è‰²å™¨è´Ÿè´£è®¡ç®—å…‰ç…§è¡°å‡ã€é˜´å½±ç­‰</li>
</ul>
<p>æœ€ç»ˆåœ¨2010å¹´çš„ Unity3 ä¸­ï¼ŒåŠ å…¥äº†<strong>è¡¨é¢ç€è‰²å™¨ï¼ˆSurface Shaderï¼‰</strong>ã€‚</p>
<p>è¡¨é¢ç€è‰²å™¨å®é™…ä¸Šæ˜¯åœ¨é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ä¸Šæ·»åŠ äº†ä¸€å±‚æŠ½è±¡ï¼Œä¾‹å¦‚åªéœ€è¦ç›´æ¥å‘Šè¯‰shaderï¼ˆå®é™…å°±æ˜¯unityä¼šæ ¹æ®æˆ‘ä»¬è¿™äº›å…³é”®é…ç½®å’Œä»£ç å»ç”Ÿæˆå®Œæ•´çš„shaderï¼Œé¿å…æˆ‘ä»¬å†™é‚£äº›é‡å¤çš„ä»£ç ï¼‰ï¼š</p>
<ul>
<li>ç”¨è¿™äº›çº¹ç†å¡«å……é¢œè‰²</li>
<li>ç”¨è¿™ä¸ªæ³•çº¿çº¹ç†å¡«å……è¡¨é¢æ³•çº¿</li>
<li>ä½¿ç”¨å…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹</li>
<li>ä¸ç”¨è€ƒè™‘æ˜¯ä½¿ç”¨å‰å‘æ¸²æŸ“è·¯å¾„è¿˜æ˜¯å»¶è¿Ÿæ¸²æŸ“è·¯å¾„ï¼Œåœºæ™¯ä¸­æœ‰å¤šå°‘å…‰æºï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå¤„ç†è¿™äº›å…‰æºç­‰</li>
</ul>
<h3 id="è¡¨é¢ç€è‰²å™¨çš„ä¸€ä¸ªä¾‹å­">è¡¨é¢ç€è‰²å™¨çš„ä¸€ä¸ªä¾‹å­</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Unity Shaders Learn/Chapter17/BumpedDiffuse&quot;</span><br><span class="line">&#123;</span><br><span class="line">    Properties</span><br><span class="line">    &#123;</span><br><span class="line">        _Color (&quot;Main Color&quot;, Color) = (1,1,1,1)</span><br><span class="line">        _MainTex (&quot;Base (RGB)&quot;, 2D) = &quot;white&quot; &#123;&#125;</span><br><span class="line">        _BumpMap (&quot;Normalmap&quot;, 2D) = &quot;bump&quot; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line">        Tags &#123; &quot;RenderType&quot;=&quot;Opaque&quot; &#125;</span><br><span class="line">        LOD 300</span><br><span class="line"></span><br><span class="line">        CGPROGRAM</span><br><span class="line">        #pragma surface surf Lambert</span><br><span class="line"></span><br><span class="line">        // Use shader model 3.0 target, to get nicer looking lighting</span><br><span class="line">        #pragma target 3.0</span><br><span class="line"></span><br><span class="line">        sampler2D _MainTex;</span><br><span class="line">        sampler2D _BumpMap;</span><br><span class="line">        fixed4 _Color;</span><br><span class="line"></span><br><span class="line">        struct Input</span><br><span class="line">        &#123;</span><br><span class="line">            float2 uv_MainTex;</span><br><span class="line">            float2 uv_BumpMap;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        void surf (Input IN, inout SurfaceOutput o)</span><br><span class="line">        &#123;</span><br><span class="line">            // Albedo comes from a texture tinted by color</span><br><span class="line">            fixed4 c = tex2D (_MainTex, IN.uv_MainTex);</span><br><span class="line">            o.Albedo = c.rgb * _Color.rgb;</span><br><span class="line">            o.Alpha = c.a * _Color.a;</span><br><span class="line">            o.Normal = UnpackNormal(tex2D(_BumpMap, IN.uv_BumpMap));</span><br><span class="line">        &#125;</span><br><span class="line">        ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">    FallBack &quot;Legacy Shaders/Diffuse&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<center>
<img src="http://static.zybuluo.com/candycat/slo759tsffn90428bqqkt054/bumped_diffuse.png" />
<p>è¡¨é¢ç€è‰²å™¨çš„ä¾‹å­ã€‚å·¦å›¾ï¼šåœ¨ä¸€ä¸ªå¹³è¡Œå…‰ä¸‹çš„æ•ˆæœã€‚å³å›¾ï¼šæ·»åŠ äº†ä¸€ä¸ªç‚¹å…‰æºï¼ˆè“è‰²ï¼‰å’Œä¸€ä¸ªèšå…‰ç¯ï¼ˆç´«è‰²ï¼‰åçš„æ•ˆæœ</p>
</center>
<p>ç›¸æ¯”é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ï¼Œè¡¨é¢ç€è‰²å™¨çš„ä»£ç é‡æ›´å°‘ã€‚è€Œä¸”å¯ä»¥è½»æ¾åœ°å®ç°å¸¸è§çš„å…‰ç…§æ¨¡å‹ï¼Œç”šè‡³ä¸éœ€è¦å’Œä»»ä½•å…‰ç…§å˜é‡æ‰“äº¤é“ï¼ŒUnityä¸ºæˆ‘ä»¬å¤„ç†å¥½äº†æ¯ä¸ªå…‰æºçš„å…‰ç…§ç»“æœã€‚</p>
<p>è¡¨é¢ç€è‰²å™¨çš„CGä»£ç ç›´æ¥ä¸”å¿…é¡»å†™åœ¨ SubShader å—ä¸­ã€‚æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ <strong>ä¸¤ä¸ªç»“æ„ä½“</strong> ä»¥åŠå®ƒçš„ <strong>ç¼–è¯‘æŒ‡ä»¤</strong>ã€‚</p>
<h3 id="æ±‡ç¼–æŒ‡ä»¤">æ±‡ç¼–æŒ‡ä»¤</h3>
<p>æ±‡ç¼–æŒ‡ä»¤æœ€é‡è¦çš„ä½œç”¨æ˜¯æŒ‡æ˜è¯¥è¡¨é¢ç€è‰²å™¨ä½¿ç”¨çš„ <strong>è¡¨é¢å‡½æ•°</strong> å’Œ <strong>å…‰ç…§å‡½æ•°</strong>ï¼Œå¹¶è®¾ç½®ä¸€äº›å¯é€‰å‚æ•°ã€‚ç¼–è¯‘æŒ‡ä»¤çš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// pragma surfaceæŒ‡æ˜è¯¥ç¼–è¯‘æŒ‡ä»¤æ˜¯ç”¨äºå®šä¹‰è¡¨é¢ç€è‰²å™¨çš„</span><br><span class="line">// surfaceFunctionè¡¨é¢å‡½æ•°</span><br><span class="line">// lightModelå…‰ç…§æ¨¡å‹</span><br><span class="line">#pragma surface surfaceFunction lightModel [optionalparams]</span><br></pre></td></tr></table></figure>
<h6 id="è¡¨é¢å‡½æ•°">è¡¨é¢å‡½æ•°</h6>
<p>surfaceFunction ç”¨äºå®šä¹‰åå°„ç‡ã€å…‰æ»‘åº¦ã€é€æ˜åº¦ç­‰è¡¨é¢å±æ€§ï¼Œé€šå¸¸æ˜¯åä¸º surf çš„å‡½æ•°ï¼ˆå‡½æ•°åå¯ä»¥æ˜¯ä»»æ„çš„ï¼‰ï¼Œä»–çš„å‡½æ•°æ ¼å¼çš„å›ºå®šçš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void surf(Input IN, inout SurfaceOutput o)</span><br><span class="line">// PBRåŠ å…¥çš„ä¸¤ä¸ª</span><br><span class="line">void surf(Input IN, inout SurfaceOutputStandard o)</span><br><span class="line">void surf(Input IN, inout SurfaceOutputStandardSpecular o)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¡¨é¢å‡½æ•°ä¸­ï¼Œä¼šä½¿ç”¨è¾“å…¥ç»“æ„ä½“<strong>InputIN</strong>æ¥è®¾ç½®å„ç§è¡¨é¢å±æ€§ï¼Œå¹¶æŠŠè¿™äº›å±æ€§å‚¨å­˜åœ¨è¾“å‡ºç»“æ„ä½“ä¸­ï¼Œå†ä¼ é€’ç»™å…‰ç…§å‡½æ•°è®¡ç®—å…‰ç…§ç»“æœã€‚</p>
<h6 id="å…‰ç…§å‡½æ•°">å…‰ç…§å‡½æ•°</h6>
<p>å…‰ç…§å‡½æ•°ä¼šä½¿ç”¨è¡¨é¢å‡½æ•°ä¸­è®¾ç½®çš„å„ç§è¡¨é¢å±æ€§ï¼Œæ¥åº”ç”¨æŸäº›å…‰ç…§æ¨¡å‹ï¼Œè¿›è€Œæ¨¡æ‹Ÿç‰©ä½“è¡¨é¢çš„å…‰ç…§æ•ˆæœã€‚</p>
<ul>
<li>åŸºäºç‰©ç†çš„å…‰ç…§æ¨¡å‹å‡½æ•°ï¼ˆUnityPBSLighting.cgincï¼‰ï¼š
<ul>
<li>Standard</li>
<li>StandardSpecular</li>
</ul>
</li>
<li>ç®€å•çš„éåŸºäºç‰©ç†çš„å…‰ç…§æ¨¡å‹å‡½æ•°ï¼ˆLighting.cgincï¼‰ï¼š
<ul>
<li>Lambert</li>
<li>BlinnPhong</li>
</ul>
</li>
</ul>
<p>è¿˜å¯ä»¥è‡ªå®šä¹‰å…‰ç…§å‡½æ•°ï¼Œä¾‹å¦‚ç”¨ä¸‹é¢çš„å‡½æ•°æ¥å®šä¹‰ç”¨äºå‰å‘æ¸²æŸ“ä¸­çš„å…‰ç…§å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ç”¨äºä¸ä¾èµ–è§†è§’çš„å…‰ç…§æ¨¡å‹ï¼Œä¾‹å¦‚æ¼«åå°„</span><br><span class="line">half4 Lighting&lt;Name&gt; (SurfaceOutput s, half3 lightDir, half atten);</span><br><span class="line">// ç”¨äºä¾èµ–è§†è§’çš„å…‰ç…§æ¨¡å‹ï¼Œä¾‹å¦‚é«˜å…‰åå°„</span><br><span class="line">half4 Lighting&lt;Name&gt; (SurfaceOutput s, half3 lightDir, half3 viewDir, half atten);s</span><br></pre></td></tr></table></figure>
<h6 id="å…¶ä»–å¯é€‰å‚æ•°">å…¶ä»–å¯é€‰å‚æ•°</h6>
<p>å¯é€‰å‚æ•°åŒ…å«äº†å¾ˆå¤šéå¸¸æœ‰ç”¨çš„<a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/SL-SurfaceShaders.html">æŒ‡ä»¤ç±»å‹</a>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰çš„ä¿®æ”¹å‡½æ•°
<ul>
<li>è¡¨é¢å‡½æ•°</li>
<li>å…‰ç…§æ¨¡å‹</li>
<li>é¡¶ç‚¹ä¿®æ”¹å‡½æ•°ï¼ˆvertex:VertexFunctionï¼‰ï¼šä¾‹å¦‚æŠŠé¡¶ç‚¹é¢œè‰²ä¼ é€’ç»™è¡¨é¢å‡½æ•°ï¼Œä¿®æ”¹é¡¶ç‚¹ä½ç½®ï¼Œå®ç°æŸäº›é¡¶ç‚¹åŠ¨ç”»ç­‰</li>
<li>æœ€åçš„é¢œè‰²ä¿®æ”¹å‡½æ•°ï¼ˆfinalcolor:ColorFunctionï¼‰ï¼šå¯ä»¥åœ¨é¢œè‰²ç»˜åˆ¶åˆ°å±å¹•å‰ï¼Œæœ€åä¸€æ¬¡ä¿®æ”¹é¢œè‰²å€¼ï¼Œä¾‹å¦‚å®ç°è‡ªå®šä¹‰çš„é›¾æ•ˆç­‰</li>
</ul>
</li>
<li>é˜´å½±
<ul>
<li>addshadowï¼šä¸ºè¡¨é¢ç€è‰²å™¨ç”Ÿæˆä¸€ä¸ªé˜´å½±æŠ•å°„çš„Passï¼Œå¯ä»¥å¯¹é˜´å½±çš„æŠ•å°„è¿›è¡Œç‰¹æ®Šå¤„ç†(é¡¶ç‚¹åŠ¨ç”»æˆ–è€…é€æ˜åº¦æµ‹è¯•æ—¶)</li>
<li>fullforwardshadowsï¼šå¯ä»¥åœ¨å‰å‘æ¸²æŸ“è·¯å¾„ä¸­æ”¯æŒæ‰€æœ‰å…‰æºç±»å‹çš„é˜´å½±ï¼Œé»˜è®¤åªæœ‰æœ€é‡è¦çš„å¹³è¡Œå…‰</li>
<li>noshadowï¼šç¦ç”¨é˜´å½±</li>
</ul>
</li>
<li>é€æ˜åº¦æ··åˆå’Œé€æ˜åº¦æµ‹è¯•
<ul>
<li>alphaï¼šé€æ˜åº¦æ··åˆ</li>
<li>alphatest:VariableNameï¼šä½¿ç”¨åä¸º VariableName çš„å˜é‡æ¥å‰”é™¤ä¸æ»¡è¶³æ¡ä»¶çš„ç‰‡å…ƒ</li>
</ul>
</li>
<li>å…‰ç…§
<ul>
<li>noambientï¼šä¸è¦åº”ç”¨ä»»ä½•ç¯å¢ƒå…‰ç…§æˆ–å…‰ç…§æ¢é’ˆï¼ˆlight probeï¼‰</li>
<li>novertexlightsï¼šä¸è¦åº”ç”¨ä»»ä½•é€é¡¶ç‚¹å…‰ç…§</li>
<li>noforwardaddï¼šå»æ‰æ‰€æœ‰å‰å‘æ¸²æŸ“ä¸­çš„é¢å¤–Passï¼Œåªæ”¯æŒä¸€ä¸ªé€åƒç´ å¹³è¡Œå…‰ï¼Œå…¶ä»–æŒ‰é€é¡¶ç‚¹æˆ–SHå…‰æº</li>
<li>nolightmap/nofogï¼Œæ§åˆ¶å…‰ç…§çƒ˜ç„™ã€é›¾æ•ˆæ¨¡æ‹Ÿ</li>
</ul>
</li>
<li>æ§åˆ¶ä»£ç çš„ç”Ÿæˆ
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ä¼šä¸ºä¸€ä¸ªè¡¨é¢ç€è‰²å™¨ç”Ÿæˆå“åº”çš„å‰å‘æ¸²æŸ“è·¯å¾„ã€å»¶è¿Ÿæ¸²æŸ“è·¯å¾„ä½¿ç”¨çš„ Passï¼Œè¿™ä¼šå¯¼è‡´ç”Ÿæˆçš„ Shader æ–‡ä»¶æ¯”è¾ƒå¤§</li>
<li>exclude_path:[deferred/forward/prepass]ï¼Œä¸è¦ä¸ºè¿™äº›æ¸²æŸ“è·¯å¾„ç”Ÿæˆä»£ç </li>
</ul>
</li>
</ul>
<h3 id="ä¸¤ä¸ªç»“æ„ä½“">ä¸¤ä¸ªç»“æ„ä½“</h3>
<p>è¡¨é¢ç€è‰²å™¨æ”¯æŒæœ€å¤šè‡ªå®šä¹‰4ç§å…³é”®çš„å‡½æ•°ï¼šè¡¨é¢å‡½æ•°ï¼Œå…‰ç…§å‡½æ•°ï¼Œé¡¶ç‚¹ä¿®æ”¹å‡½æ•°ï¼Œæœ€åçš„é¢œè‰²ä¿®æ”¹å‡½æ•°ã€‚</p>
<p>éœ€è¦é€šè¿‡ä¸¤ä¸ªç»“æ„ä½“ï¼Œåœ¨ä»–ä»¬ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼š</p>
<ul>
<li>è¡¨é¢å‡½æ•°çš„è¾“å…¥ç»“æ„ä½“ Input</li>
<li>å­˜å‚¨è¡¨é¢å±æ€§çš„ç»“æ„ä½“ SurfaceOutputï¼ˆä»¥åŠ SurfaceOutputStandard å’Œ SurfaceOutputStandardSpecularï¼‰</li>
</ul>
<h6 id="æ•°æ®æ¥æºï¼šInput-ç»“æ„ä½“">æ•°æ®æ¥æºï¼šInput ç»“æ„ä½“</h6>
<p>è¾“å…¥ç»“æ„ä½“InputåŒ…å«äº†è®¸å¤šè¡¨é¢å±æ€§çš„æ•°æ®æ¥æºï¼Œå®ƒä¼šä½œä¸ºè¡¨é¢å‡½æ•°çš„è¾“å…¥ç»“æ„ä½“ï¼ˆå¦‚æœè‡ªå®šä¹‰äº†é¡¶ç‚¹ä¿®æ”¹å‡½æ•°è¿˜ä¼šæ˜¯é¡¶ç‚¹ä¿®æ”¹å‡½æ•°çš„è¾“å‡ºç»“æ„ä½“ï¼‰ã€‚å…¶ä¸­å¦‚æœæœ‰çº¹ç†åæ ‡ï¼Œé‚£å‘½åè§„åˆ™ä¸ºuvåŠ çº¹ç†åç§°ï¼ˆå½“ä½¿ç”¨ç¬¬äºŒå¼ çº¹ç†åæ ‡æ—¶ä½¿ç”¨uv2åŠ çº¹ç†åç§°ï¼‰ã€‚ä¸‹è¡¨åˆ—å‡ºäº†Inputç»“æ„ä½“ä¸­å†…ç½®çš„å…¶ä»–å˜é‡ï¼ˆä¸éœ€è¦æ‰‹åŠ¨è®¡ç®—ï¼Œunityä¼šå‡†å¤‡å¥½ï¼Œä½†éœ€è¦åœ¨ Input ç»“æ„ä½“ä¸­ä¸¥æ ¼å£°æ˜è¿™äº›å˜é‡ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>float3 viewDir</td>
<td>åŒ…å«äº†è§†è§’æ–¹å‘ï¼Œå¯ç”¨äºè®¡ç®—è¾¹ç¼˜å…‰ç…§ç­‰</td>
</tr>
<tr>
<td>ä½¿ç”¨COLORè¯­ä¹‰å®šä¹‰çš„float4å˜é‡</td>
<td>åŒ…å«äº†æ’å€¼åçš„é€é¡¶ç‚¹é¢œè‰²</td>
</tr>
<tr>
<td>float4 screenPos</td>
<td>åŒ…å«äº†å±å¹•ç©ºé—´çš„åæ ‡ï¼Œå¯ä»¥ç”¨äºåå°„æˆ–å±å¹•ç‰¹æ•ˆ</td>
</tr>
<tr>
<td>float3 worldPos</td>
<td>åŒ…å«äº†ä¸–ç•Œç©ºé—´ä¸‹çš„ä½ç½®</td>
</tr>
<tr>
<td>float3 worldRefl</td>
<td>åŒ…å«äº†ä¸–ç•Œç©ºé—´ä¸‹çš„åå°„æ–¹å‘ã€‚å‰ææ˜¯æ²¡æœ‰ä¿®æ”¹è¡¨é¢æ³•çº¿o.Normal</td>
</tr>
<tr>
<td>float3 worldRefl;INTERNAL_DATA</td>
<td>å¦‚æœä¿®æ”¹äº†è¡¨é¢æ³•çº¿o.Normalï¼Œéœ€è¦ä½¿ç”¨è¯¥å˜é‡å‘Šè¯‰Unityè¦åŸºäºä¿®æ”¹åçš„æ³•çº¿è®¡ç®—ä¸–ç•Œç©ºé—´ä¸‹çš„åå°„æ–¹å‘ã€‚åœ¨è¡¨é¢å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨WorldReflectionVector(IN, o.Normal)æ¥å¾—åˆ°ä¸–ç•Œç©ºé—´ä¸‹çš„åå°„æ–¹å‘</td>
</tr>
<tr>
<td>float3 worldNormal</td>
<td>åŒ…å«äº†ä¸–ç•Œç©ºé—´ä¸‹çš„æ³•çº¿æ–¹å‘ã€‚å‰ææ˜¯æ²¡æœ‰ä¿®æ”¹è¡¨é¢æ³•çº¿o.Normal</td>
</tr>
<tr>
<td>float3 worldNormal;INTERNAL_DATA</td>
<td>å¦‚æœä¿®æ”¹äº†è¡¨é¢æ³•çº¿o.Normalï¼Œéœ€è¦ä½¿ç”¨è¯¥å˜é‡å‘Šè¯‰Unityè¦åŸºäºä¿®æ”¹åçš„æ³•çº¿è®¡ç®—ä¸–ç•Œç©ºé—´ä¸‹çš„æ³•çº¿æ–¹å‘ã€‚åœ¨è¡¨é¢å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨WorldNormalVector(IN, o.Normal)æ¥å¾—åˆ°ä¸–ç•Œç©ºé—´ä¸‹çš„æ³•çº¿æ–¹å‘</td>
</tr>
</tbody>
</table>
<h6 id="è¡¨é¢å±æ€§ï¼šSurfaceOutput-ç»“æ„ä½“">è¡¨é¢å±æ€§ï¼šSurfaceOutput ç»“æ„ä½“</h6>
<p>SurfaceOutput SurfaceOutputStandard SurfaceOutputStandardSpecular ä½œä¸ºè¡¨é¢å‡½æ•°çš„è¾“å‡ºï¼Œéšåä½œä¸ºå…‰ç…§å‡½æ•°çš„è¾“å…¥æ¥è¿›è¡Œå…‰ç…§è®¡ç®—ã€‚</p>
<p>ç›¸æ¯” Input ç»“æ„ä½“çš„è‡ªç”±æ€§ï¼Œè¿™ä¸ªç»“æ„ä½“é‡Œé¢çš„å˜é‡æ˜¯æå‰å°±å£°æ˜å¥½çš„ï¼Œä¸èƒ½å¢åŠ æˆ–å‡å°‘ã€‚</p>
<p>SurfaceOutput çš„å£°æ˜å¯ä»¥åœ¨ Lighting.cginc ä¸­æ‰¾åˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">struct SurfaceOutput &#123;</span><br><span class="line">    fixed3 Albedo;</span><br><span class="line">    fixed3 Normal;</span><br><span class="line">    fixed3 Emission;</span><br><span class="line">    half Specular;</span><br><span class="line">    fixed Gloss;</span><br><span class="line">    fixed Alpha;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>SurfaceOutputStandard å’Œ SurfaceOutputStandardSpecular çš„å£°æ˜å¯ä»¥åœ¨ UnityPBSLighting.cginc ä¸­æ‰¾åˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">struct SurfaceOutputStandard</span><br><span class="line">&#123;</span><br><span class="line">    fixed3 Albedo;      // base (diffuse or specular) color</span><br><span class="line">    float3 Normal;      // tangent space normal, if written</span><br><span class="line">    half3 Emission;</span><br><span class="line">    half Metallic;      // 0=non-metal, 1=metal</span><br><span class="line">    // Smoothness is the user facing name, it should be perceptual smoothness but user should not have to deal with it.</span><br><span class="line">    // Everywhere in the code you meet smoothness it is perceptual smoothness</span><br><span class="line">    half Smoothness;    // 0=rough, 1=smooth</span><br><span class="line">    half Occlusion;     // occlusion (default 1)</span><br><span class="line">    fixed Alpha;        // alpha for transparencies</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct SurfaceOutputStandardSpecular</span><br><span class="line">&#123;</span><br><span class="line">    fixed3 Albedo;      // diffuse color</span><br><span class="line">    fixed3 Specular;    // specular color</span><br><span class="line">    float3 Normal;      // tangent space normal, if written</span><br><span class="line">    half3 Emission;</span><br><span class="line">    half Smoothness;    // 0=rough, 1=smooth</span><br><span class="line">    half Occlusion;     // occlusion (default 1)</span><br><span class="line">    fixed Alpha;        // alpha for transparencies</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å“ªä¸ªè¾“å‡ºç»“æ„ä½“ï¼Œå–å†³äºæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„å…‰ç…§æ¨¡å‹ï¼š</p>
<ul>
<li>ä½¿ç”¨ SurfaceOutputï¼šUnity5 ä¹‹å‰çš„ã€ç®€å•çš„ã€éåŸºäºç‰©ç†çš„å…‰ç…§æ¨¡å‹ã€‚åŒ…æ‹¬ Lambert å’Œ BlinnPhong</li>
<li>ä½¿ç”¨ SurfaceOutputStandardï¼šUnity5æ·»åŠ çš„ã€åŸºäºç‰©ç†çš„å…‰ç…§æ¨¡å‹ï¼ŒStandardã€‚ç”¨äºé»˜è®¤çš„é‡‘å±å·¥ä½œæµç¨‹ï¼ˆMetallic Workflowï¼‰</li>
<li>ä½¿ç”¨ SurfaceOutputStandardSpecularï¼šUnity5 æ·»åŠ çš„ã€åŸºäºç‰©ç†çš„å…‰ç…§æ¨¡å‹ï¼ŒStandardSpecularã€‚ç”¨äºé«˜å…‰å·¥ä½œæµç¨‹ï¼ˆSpecular Workflowï¼‰</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ SurfaceOutput ç»“æ„ä½“ä¸­çš„å˜é‡å’Œå«ä¹‰ï¼š</p>
<ul>
<li>fixed3 Albedoï¼šå¯¹å…‰æºçš„åå°„ç‡ã€‚é€šå¸¸ç”±çº¹ç†é‡‡æ ·å’Œé¢œè‰²å±æ€§çš„ä¹˜ç§¯è®¡ç®—è€Œå¾—</li>
<li>fixed3 Normalï¼šè¡¨é¢æ³•çº¿æ–¹å‘ã€‚</li>
<li>fixed3 Emissionï¼šè‡ªå‘å…‰ã€‚c.rgb += o.Emission;</li>
<li>half Specularï¼šé«˜å…‰åå°„ä¸­æŒ‡æ•°éƒ¨åˆ†çš„ç³»æ•°ã€‚</li>
<li>fixed Glossï¼šé«˜å…‰åå°„ä¸­çš„å¼ºåº¦ç³»æ•°ã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å†…ç½®çš„BlinnPhoneå…‰ç…§å‡½æ•°</span><br><span class="line">float spec = pow(nh, s.Specular * 128.0) * s.Gloss</span><br></pre></td></tr></table></figure>
</li>
<li>fixed Alphaï¼šé€æ˜é€šé“ã€‚å¦‚æœå¼€å¯äº†é€æ˜åº¦çš„è¯ï¼Œä¼šç”¨è¯¥å€¼è¿›è¡Œé¢œè‰²æ··åˆï¼Œå¦è€…é»˜è®¤ä¼šè¢«é‡ç½®ä¸º1(å¯é…ç½®)</li>
</ul>
<p>æ—¶åˆ»è®°ç€ï¼Œè¡¨é¢ç€è‰²å™¨æœ¬è´¨ä¸Šå°±æ˜¯åŒ…å«äº†å¾ˆå¤š Pass çš„é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ã€‚</p>
<h3 id="Unity-èƒŒååšäº†ä»€ä¹ˆ">Unity èƒŒååšäº†ä»€ä¹ˆ</h3>
<p>è¡¨é¢ç€è‰²å™¨ä¸­çš„å„ä¸ªå‡½æ•°ã€ç¼–è¯‘æŒ‡ä»¤å’Œç»“æ„ä½“ä¸é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<ul>
<li>æœ‰äº› Pass æ˜¯ä¸ºäº†é’ˆå¯¹ä¸åŒçš„æ¸²æŸ“è·¯å¾„
<ul>
<li>ä¼šå‰å‘æ¸²æŸ“è·¯å¾„ç”Ÿæˆ LightMode ä¸º ForwardBase å’Œ ForwardAdd çš„ Pass</li>
<li>ä¸º Unity5 ä¹‹å‰çš„å»¶è¿Ÿæ¸²æŸ“è·¯å¾„ç”Ÿæˆ LightMode ä¸º PrePassBase å’Œ PrePassFinal çš„ Pass</li>
<li>ä¸º Unity5 ä¹‹åçš„å»¶è¿Ÿæ¸²æŸ“è·¯å¾„ç”Ÿæˆ LightMode ä¸º Deferred çš„ Pass</li>
</ul>
</li>
<li>ä¸€äº› Pass æ˜¯ç”¨äºäº§ç”Ÿé¢å¤–çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ä¸ºäº†ç»™å…‰ç…§æ˜ å°„å’ŒåŠ¨æ€å…¨å±€å…‰ç…§æå–è¡¨é¢ä¿¡æ¯ï¼Œä¼šç”Ÿæˆä¸€ä¸ª LightMode ä¸º Meta çš„ Pass</li>
<li>æœ‰äº›è¡¨é¢ç€è‰²å™¨ç”±äºä¿®æ”¹äº†é¡¶ç‚¹ä½ç½®ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ addshadow ç¼–è¯‘æŒ‡ä»¤ä¸ºå®ƒç”Ÿæˆç›¸åº”çš„ LightMode ä¸º ShadowCaster çš„é˜´å½±æŠ•å°„ Pass</li>
</ul>
<p>åœ¨æ¯ä¸ªç¼–è¯‘å®Œæˆçš„è¡¨é¢ç€è‰²å™¨é¢æ¿ä¸Šï¼Œéƒ½æœ‰ Show generated code æŒ‰é’®ï¼Œå•å‡»å¯ä»¥çœ‹åˆ° Unity ä¸ºå®ƒç”Ÿæˆçš„æ‰€æœ‰é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ã€‚</p>
<center>
<img src="http://static.zybuluo.com/candycat/rt3i7s74tdilo8185rexkowi/generated_code.png" />
<p>æŸ¥çœ‹è¡¨é¢ç€è‰²å™¨ç”Ÿæˆçš„ä»£ç </p>
</center>
<p>Unityå¯¹ForwardBaseçš„Passè‡ªåŠ¨ç”Ÿæˆè¿‡ç¨‹å¤§æ¦‚å¦‚ä¸‹</p>
<ol>
<li>
<p>Unityä¼šç›´æ¥å°†è¡¨é¢ç€è‰²å™¨ä¸­CGPROGRAMå’ŒENDCGä¹‹é—´çš„ä»£ç èµ‹å€¼è¿‡æ¥ï¼Œè¿™äº›ä»£ç åŒ…æ‹¬äº†æˆ‘ä»¬å¯¹Inputç»“æ„ä½“ï¼Œè¡¨é¢å‡½æ•°ï¼Œå…‰ç…§å‡½æ•°ç­‰å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ã€‚è¿™äº›å‡½æ•°å’Œå˜é‡ä¼šåœ¨ä¹‹åçš„å¤„ç†è¿‡ç¨‹ä¸­è¢«å½“æˆæ­£å¸¸çš„ç»“æ„ä½“å’Œå‡½æ•°è¿›è¡Œè°ƒç”¨ã€‚</p>
</li>
<li>
<p>Unityä¼šåˆ†æä¸Šè¿°ä»£ç ï¼Œå¹¶ç”Ÿæˆé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºï¼Œå³v2f_surfç»“æ„ä½“ï¼ŒUnityä¼šåˆ†ææˆ‘ä»¬åœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­æ‰€ä½¿ç”¨çš„å˜é‡ã€‚è€Œä¸”ï¼Œå³ä¾¿æœ‰æ—¶æˆ‘ä»¬åœ¨Inputä¸­å®šä¹‰äº†æŸäº›å˜é‡ï¼ˆå¦‚æŸäº›çº¹ç†åæ ‡ï¼‰ï¼Œä½†æ˜¯å¹¶æ²¡ç”¨åˆ°ï¼ŒUnityä¼šèˆå¼ƒè¿™äº›å˜é‡ï¼Œè¿™ç›¸å½“äºä¸€ç§è‡ªåŠ¨çš„ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p>ç”Ÿæˆé¡¶ç‚¹ç€è‰²å™¨ï¼Œç”Ÿæˆé¡¶ç‚¹ç€è‰²å™¨åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ã€‚</p>
<ol>
<li>å¦‚æœæˆ‘ä»¬å®šä¹‰äº†<strong>é¡¶ç‚¹ä¿®æ”¹å‡½æ•°</strong>ï¼ŒUnityä¼šé¦–å…ˆè°ƒç”¨é¡¶ç‚¹ä¿®æ”¹å‡½æ•°æ¥ä¿®æ”¹é¡¶ç‚¹æ•°æ®ï¼Œæˆ–å¡«å……è‡ªå®šä¹‰çš„Inputç»“æ„ä½“ä¸­çš„å˜é‡ã€‚ç„¶åï¼ŒUnityä¼šåˆ†æé¡¶ç‚¹ä¿®æ”¹å‡½æ•°ä¸­ä¿®æ”¹çš„æ•°æ®ï¼Œåœ¨éœ€è¦æ—¶é€šè¿‡Inputç»“æ„ä½“å°†ä¿®æ”¹ç»“æœå­˜å‚¨åˆ°v2f_surfç›¸åº”çš„å˜é‡ä¸­ã€‚</li>
<li>è®¡ç®—v2f_surfä¸­å…¶ä»–ç”Ÿæˆçš„å˜é‡å€¼ã€‚è¿™ä¸»è¦åŒ…æ‹¬äº†é¡¶ç‚¹ä½ç½®ã€çº¹ç†åæ ‡ã€æ³•çº¿æ–¹å‘ã€é€é¡¶ç‚¹å…‰ç…§ã€å…‰ç…§çº¹ç†çš„é‡‡æ ·åæ ‡ç­‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¯‘æŒ‡ä»¤æ¥æ§åˆ¶æŸäº›å˜é‡æ˜¯å¦éœ€è¦è®¡ç®—ã€‚</li>
<li>æœ€åï¼Œå°†v2f_surfç»“æ„ä½“ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨ã€‚</li>
</ol>
</li>
<li>
<p>ç”Ÿæˆç‰‡å…ƒç€è‰²å™¨ï¼Œç”Ÿæˆç‰‡å…ƒç€è‰²å™¨åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ã€‚</p>
<ol>
<li>ä½¿ç”¨v2f_surfä¸­çš„å¯¹åº”çš„å˜é‡å¡«å……Inputç»“æ„ä½“ï¼Œä¾‹å¦‚çº¹ç†åæ ‡ï¼Œè§†è§’æ–¹å‘ç­‰ã€‚</li>
<li>è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„<strong>è¡¨é¢å‡½æ•°</strong>å¡«å……SurfaceOutputç»“æ„ä½“ã€‚</li>
<li>è°ƒç”¨<strong>å…‰ç…§å‡½æ•°</strong>å¾—åˆ°åˆå§‹çš„é¢œè‰²å€¼ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯å†…ç½®çš„Lambertæˆ–è€…BlinnPhongå…‰ç…§ï¼ŒUnityè¿˜ä¼šè®¡ç®—åŠ¨æ€å…¨å±€å…‰ç…§ï¼Œå¹¶æ·»åŠ åˆ°å…‰ç…§æ¨¡å‹çš„è®¡ç®—ä¸­ã€‚</li>
<li>è¿›è¡Œå…¶ä»–çš„é¢œè‰²çš„å åŠ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨å…‰ç…§çƒ˜ç„™ï¼Œè¿˜ä¼šæ·»åŠ é€é¡¶ç‚¹å…‰ç…§çš„å½±å“ã€‚</li>
<li>æœ€åï¼Œå¦‚æœè‡ªå®šä¹‰äº†<strong>æœ€åé¢œè‰²ä¿®æ”¹å‡½æ•°</strong>ï¼ŒUnityå°±ä¼šè°ƒç”¨å®ƒè¿›è¡Œæœ€åçš„é¢œè‰²ä¿®æ”¹ã€‚å…¶ä»–Passçš„ç”Ÿå­˜è¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚</li>
</ol>
</li>
</ol>
<center>
<img src="http://static.zybuluo.com/candycat/rokaz0qqzk11hyj7ntkss3ze/pipeline.png" />
<p>è¡¨é¢ç€è‰²å™¨çš„æ¸²æŸ“è®¡ç®—æµæ°´çº¿ã€‚é»„è‰²ï¼šå¯ä»¥è‡ªå®šä¹‰çš„å‡½æ•°ã€‚ç°è‰²ï¼šUnityè‡ªåŠ¨ç”Ÿæˆçš„è®¡ç®—æ­¥éª¤</p>
</center>
<h3 id="è¡¨é¢ç€è‰²å™¨å®ä¾‹åˆ†æ">è¡¨é¢ç€è‰²å™¨å®ä¾‹åˆ†æ</h3>
<h6 id="å®ä¾‹">å®ä¾‹</h6>
<p>å®ç°çš„æ•ˆæœæ˜¯å¯¹æ¨¡å‹è¿›è¡Œè†¨èƒ€ã€‚åŸç†æ˜¯åœ¨é¡¶ç‚¹ä¿®æ”¹å‡½æ•°ä¸­ï¼Œæ²¿ç€é¡¶ç‚¹æ³•çº¿æ–¹å‘æ‰©å¼ é¡¶ç‚¹ä½ç½®ã€‚æœ¬ä¾‹ä¸­å¯¹è¡¨é¢ç€è‰²å™¨ä¸­4ä¸ªå¯è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå…¨éƒ¨é‡‡ç”¨äº†è‡ªå®šä¹‰çš„å®ç°ï¼ˆé¡¶ç‚¹ä¿®æ”¹å‡½æ•°ã€è¡¨é¢å‡½æ•°ã€å…‰ç…§å‡½æ•°ã€æœ€åçš„é¢œè‰²ä¿®æ”¹å‡½æ•°ï¼‰ã€‚</p>
<center>
<img src="http://static.zybuluo.com/candycat/bhggsxnr7rlhkzs8u68mqarn/normal_extrusion.png" />
<p>æ²¿é¡¶ç‚¹æ³•çº¿å¯¹æ¨¡å‹è¿›è¡Œè†¨èƒ€ã€‚å·¦å›¾ï¼šè†¨èƒ€å‰ã€‚å³å›¾ï¼šè†¨èƒ€å</p>
</center>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Unity Shaders Learn/Chapter17/NormalExtrusion&quot;</span><br><span class="line">&#123;</span><br><span class="line">    Properties</span><br><span class="line">    &#123;</span><br><span class="line">        _ColorTint (&quot;Color Tint&quot;, Color) = (1,1,1,1)</span><br><span class="line">        _MainTex (&quot;Base (RGB)&quot;, 2D) = &quot;white&quot; &#123;&#125;</span><br><span class="line">        _BumpMap (&quot;Normalmap&quot;, 2D) = &quot;bump&quot; &#123;&#125;</span><br><span class="line">        _Amount (&quot;Extrusion Amount&quot;, Range(-0.5, 0.5)) = 0.1</span><br><span class="line">    &#125;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line">        Tags &#123; &quot;RenderType&quot;=&quot;Opaque&quot; &#125;</span><br><span class="line">        LOD 300</span><br><span class="line"></span><br><span class="line">        CGPROGRAM</span><br><span class="line">        //surf æŒ‡å®šè¡¨é¢ç€è‰²å™¨å‡½æ•°</span><br><span class="line">        //CustomLambertè‡ªå®šä¹‰å…‰ç…§å‡½æ•°</span><br><span class="line">        //vertex:myvert è‡ªå®šä¹‰é¡¶ç‚¹ä¿®æ”¹å‡½æ•°</span><br><span class="line">        //finalcolor:mycolor è‡ªå®šä¹‰é¢œè‰²ä¿®æ”¹å‡½æ•°</span><br><span class="line">        //addshadow ç”±äºæˆ‘ä»¬ä¿®æ”¹äº†é¡¶ç‚¹ä½ç½®ï¼Œæ‰€ä»¥éœ€è¦å‘Šè¯‰unityé‡æ–°ç”Ÿæˆshadowcasterï¼Œè®©é˜´å½±é…åˆé¡¶ç‚¹ä½ç§»</span><br><span class="line">        //exclude_path:deferred exclude_path:prepassä¸è¦ä¸ºå»¶è¿Ÿè·¯å¾„ç”Ÿæˆç›¸åº”çš„pass</span><br><span class="line">        //nometa ä¸éœ€è¦ä¸ºå…‰ç…§æ˜ å°„å’Œå…¨å±€å…‰ç…§æå–è¡¨é¢ä¿¡æ¯</span><br><span class="line">        #pragma surface surf CustomLambert vertex:myvert finalcolor:mycolor addshadow exclude_path:deferred exclude_path:prepass nometa</span><br><span class="line"></span><br><span class="line">        // Use shader model 3.0 target, to get nicer looking lighting</span><br><span class="line">        #pragma target 3.0</span><br><span class="line"></span><br><span class="line">        sampler2D _MainTex;</span><br><span class="line">        sampler2D _BumpMap;</span><br><span class="line">        fixed4 _ColorTint;</span><br><span class="line">        half _Amount;</span><br><span class="line"></span><br><span class="line">        struct Input</span><br><span class="line">        &#123;</span><br><span class="line">            float2 uv_MainTex;</span><br><span class="line">            float2 uv_BumpMap;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        void myvert (inout appdata_full v)</span><br><span class="line">        &#123;</span><br><span class="line">            v.vertex.xyz += v.normal * _Amount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void surf (Input IN, inout SurfaceOutput o)</span><br><span class="line">        &#123;</span><br><span class="line">            // Albedo comes from a texture tinted by color</span><br><span class="line">            fixed4 c = tex2D (_MainTex, IN.uv_MainTex);</span><br><span class="line">            o.Albedo = c.rgb;</span><br><span class="line">            o.Alpha = c.a;</span><br><span class="line">            o.Normal = UnpackNormal(tex2D(_BumpMap, IN.uv_BumpMap));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        half4 LightingCustomLambert (SurfaceOutput s, half3 lightDir, half atten)</span><br><span class="line">        &#123;</span><br><span class="line">            half NdotL = dot(s.Normal, lightDir);</span><br><span class="line">            half4 c;</span><br><span class="line">            c.rgb = s.Albedo * _LightColor0 * NdotL * atten;</span><br><span class="line">            c.a = s.Alpha;</span><br><span class="line">            return c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void mycolor (Input IN, SurfaceOutput o, inout float4 color)</span><br><span class="line">        &#123;</span><br><span class="line">            color *= _ColorTint;</span><br><span class="line">        &#125;</span><br><span class="line">        ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">    FallBack &quot;Legacy Shaders/Diffuse&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨é¡¶ç‚¹ä¿®æ”¹å‡½æ•° myvert()ï¼šä½¿ç”¨é¡¶ç‚¹æ³•çº¿å¯¹é¡¶ç‚¹ä½ç½®è¿›è¡Œäº†è†¨èƒ€</li>
<li>åœ¨è¡¨é¢å‡½æ•° surf()ï¼šä½¿ç”¨ä¸»çº¹ç†è®¾ç½®äº†è¡¨é¢å±æ€§ä¸­çš„åå°„ç‡ï¼Œä½¿ç”¨æ³•çº¿çº¹ç†è®¾ç½®äº†è¡¨é¢æ–¹å‘</li>
<li>åœ¨å…‰ç…§å‡½æ•° LightingCustomLambert()ï¼šå®ç°äº†ç®€å•çš„å…°ä¼¯ç‰¹æ¼«åå°„å…‰ç…§æ¨¡å‹</li>
<li>åœ¨æœ€åçš„é¢œè‰²ä¿®æ”¹å‡½æ•° mycolor()ï¼šç®€å•çš„ä½¿ç”¨äº†é¢œè‰²å‚æ•°å¯¹è¾“å‡ºé¢œè‰²è¿›è¡Œè°ƒæ•´</li>
<li>pragma surface ç¼–è¯‘æŒ‡ä»¤ï¼š
<ul>
<li>addshadowï¼šç”Ÿæˆä¸€ä¸ªè¯¥è¡¨é¢ç€è‰²å™¨å¯¹åº”çš„é˜´å½±æŠ•å°„ Passï¼Œè€Œä¸è¦ä¾èµ– FallBack ä¸­æ‰¾åˆ°çš„é˜´å½±æŠ•å°„ Pass</li>
<li>exclude_path:deferred exclude_path:prepassï¼šä¸è¦ä¸ºå»¶è¿Ÿæ¸²æŸ“è·¯å¾„ç”Ÿæˆç›¸åº”çš„ Passï¼Œä¸ºäº†ç¼©å°è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç é‡</li>
<li>nometaï¼šå–æ¶ˆå¯¹æå–å…ƒæ•°æ®çš„ Pass çš„ç”Ÿæˆ</li>
</ul>
</li>
</ul>
<h6 id="ç”Ÿæˆä»£ç åˆ†æ">ç”Ÿæˆä»£ç åˆ†æ</h6>
<p>ç”Ÿæˆäº†3ä¸ª Passï¼Œåˆ†åˆ«æ˜¯ LightMode ä¸º ForwardBaseï¼ˆå‰å‘æ¸²æŸ“è·¯å¾„ä¸­å¤„ç†é€åƒç´ çš„å¹³è¡Œå…‰ï¼‰ã€ForwardAddï¼ˆå¤„ç†å…¶ä»–é€åƒç´ å…‰ï¼‰ã€ShadowCasterï¼ˆå¤„ç†é˜´å½±æŠ•å°„ï¼‰ã€‚ä»£ç ä¸­æœ‰å¤§é‡çš„#ifdefå’Œ#ifè¯­å¥ï¼Œå¯ä»¥åˆ¤æ–­ä¸€äº›æ¸²æŸ“æ¡ä»¶ï¼Œå¦‚æ˜¯å¦ä½¿ç”¨äº†åŠ¨æ€å…‰ç…§çº¹ç†ã€æ˜¯å¦ä½¿ç”¨äº†é€é¡¶ç‚¹å…‰ç…§ã€æ˜¯å¦ä½¿ç”¨äº†å±å¹•ç©ºé—´çš„é˜´å½±ç­‰ï¼Œunityä¼šæ ¹æ®è¿™äº›æ¡ä»¶æ¥è¿›è¡Œä¸åŒçš„å…‰ç…§è®¡ç®—ï¼ŒæŠŠçƒ¦äººçš„å…‰ç…§è®¡ç®—éƒ½äº¤ç»™Unity</p>
<p>ä»¥ä¸‹åˆ†æ Unityç”Ÿæˆçš„ForwardBaseï¼ˆ2021.3.4f1ï¼‰</p>
<ol>
<li>
<p>é¦–å…ˆæŒ‡æ˜äº†ä¸€äº›ç¼–è¯‘æŒ‡ä»¤ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// ---- forward rendering base pass:</span><br><span class="line">	Pass &#123;</span><br><span class="line">		Name &quot;FORWARD&quot;</span><br><span class="line">		Tags &#123; &quot;LightMode&quot; = &quot;ForwardBase&quot; &#125;</span><br><span class="line"></span><br><span class="line">CGPROGRAM</span><br><span class="line">// compile directives</span><br><span class="line">#pragma vertex vert_surf</span><br><span class="line">#pragma fragment frag_surf</span><br><span class="line">#pragma target 3.0</span><br><span class="line">#pragma multi_compile_instancing</span><br><span class="line">#pragma multi_compile_fwdbase</span><br><span class="line">#include &quot;HLSLSupport.cginc&quot;</span><br><span class="line">#define UNITY_INSTANCED_LOD_FADE</span><br><span class="line">#define UNITY_INSTANCED_SH</span><br><span class="line">#define UNITY_INSTANCED_LIGHTMAPSTS</span><br><span class="line">#include &quot;UnityShaderVariables.cginc&quot;</span><br><span class="line">#include &quot;UnityShaderUtilities.cginc&quot;</span><br></pre></td></tr></table></figure>
<p>é¡¶ç‚¹ç€è‰²å™¨vert_surfå’Œç‰‡å…ƒç€è‰²å™¨frag_surféƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„</p>
</li>
<li>
<p>ä¹‹åæ˜¯ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// Surface shader code generated based on:</span><br><span class="line">// vertex modifier: &#x27;myvert&#x27;</span><br><span class="line">// writes to per-pixel normal: YES</span><br><span class="line">// writes to emission: no</span><br><span class="line">// writes to occlusion: no</span><br><span class="line">// needs world space reflection vector: no</span><br><span class="line">// needs world space normal vector: no</span><br><span class="line">// needs screen space position: no</span><br><span class="line">// needs world space position: no</span><br><span class="line">// needs view direction: no</span><br><span class="line">// needs world space view direction: no</span><br><span class="line">// needs world space position for lighting: no</span><br><span class="line">// needs world space view direction for lighting: no</span><br><span class="line">// needs world space view direction for lightmaps: no</span><br><span class="line">// needs vertex color: no</span><br><span class="line">// needs VFACE: no</span><br><span class="line">// needs SV_IsFrontFace: no</span><br><span class="line">// passes tangent-to-world matrix to pixel shader: YES</span><br><span class="line">// reads from normal: no</span><br><span class="line">// 2 texcoords actually used</span><br><span class="line">//   float2 _MainTex</span><br><span class="line">//   float2 _BumpMap</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>éšåå®šä¹‰äº†ä¸€äº›å®æ¥è¾…åŠ©è®¡ç®—ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define INTERNAL_DATA half3 internalSurfaceTtoW0; half3 internalSurfaceTtoW1; half3 internalSurfaceTtoW2;</span><br><span class="line">#define WorldReflectionVector(data,normal) reflect (data.worldRefl, half3(dot(data.internalSurfaceTtoW0,normal), dot(data.internalSurfaceTtoW1,normal), dot(data.internalSurfaceTtoW2,normal)))</span><br><span class="line">#define WorldNormalVector(data,normal) fixed3(dot(data.internalSurfaceTtoW0,normal), dot(data.internalSurfaceTtoW1,normal), dot(data.internalSurfaceTtoW2,normal))</span><br></pre></td></tr></table></figure>
<p>è¿™äº›å®æ˜¯ä¸ºäº†ä¿®æ”¹è¡¨é¢æ³•çº¿çš„æƒ…å†µä¸‹ï¼Œè¾…åŠ©è®¡ç®—å¾—åˆ°ä¸–ç•Œç©ºé—´ä¸‹çš„åå°„æ–¹å‘å’Œæ³•çº¿æ–¹å‘ï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯Inputç»“æ„ä½“ä¸­çš„ä¸€äº›å˜é‡</p>
</li>
<li>
<p>æ¥ç€ Unity æŠŠæˆ‘ä»¬åœ¨è¡¨é¢ç€è‰²å™¨ä¸­ç¼–å†™çš„ CG ä»£ç å¤åˆ¶è¿‡æ¥ï¼Œä½œä¸º Pass çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿åç»­è°ƒç”¨</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/* UNITY: Original start of shader */</span><br><span class="line">        //surf æŒ‡å®šè¡¨é¢ç€è‰²å™¨å‡½æ•°</span><br><span class="line">        //CustomLambertè‡ªå®šä¹‰å…‰ç…§å‡½æ•°</span><br><span class="line">        //vertex:myvert è‡ªå®šä¹‰é¡¶ç‚¹ä¿®æ”¹å‡½æ•°</span><br><span class="line">        //finalcolor:mycolor è‡ªå®šä¹‰é¢œè‰²ä¿®æ”¹å‡½æ•°</span><br><span class="line">        //addshadow ç”±äºæˆ‘ä»¬ä¿®æ”¹äº†é¡¶ç‚¹ä½ç½®ï¼Œæ‰€ä»¥éœ€è¦å‘Šè¯‰unityé‡æ–°ç”Ÿæˆshadowcasterï¼Œè®©é˜´å½±é…åˆé¡¶ç‚¹ä½ç§»</span><br><span class="line">        //exclude_path:deferred exclude_path:prepassä¸è¦ä¸ºå»¶è¿Ÿè·¯å¾„ç”Ÿæˆç›¸åº”çš„pass</span><br><span class="line">        //nometa ä¸éœ€è¦ä¸ºå…‰ç…§æ˜ å°„å’Œå…¨å±€å…‰ç…§æå–è¡¨é¢ä¿¡æ¯</span><br><span class="line">        //#pragma surface surf CustomLambert vertex:myvert finalcolor:mycolor addshadow exclude_path:deferred exclude_path:prepass nometa</span><br><span class="line"></span><br><span class="line">        // Use shader model 3.0 target, to get nicer looking lighting</span><br><span class="line">        //#pragma target 3.0</span><br><span class="line"></span><br><span class="line">        sampler2D _MainTex;</span><br><span class="line">        sampler2D _BumpMap;</span><br><span class="line">        fixed4 _ColorTint;</span><br><span class="line">        half _Amount;</span><br><span class="line"></span><br><span class="line">        struct Input</span><br><span class="line">        &#123;</span><br><span class="line">            float2 uv_MainTex;</span><br><span class="line">            float2 uv_BumpMap;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        void myvert (inout appdata_full v)</span><br><span class="line">        &#123;</span><br><span class="line">            v.vertex.xyz += v.normal * _Amount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void surf (Input IN, inout SurfaceOutput o)</span><br><span class="line">        &#123;</span><br><span class="line">            // Albedo comes from a texture tinted by color</span><br><span class="line">            fixed4 c = tex2D (_MainTex, IN.uv_MainTex);</span><br><span class="line">            o.Albedo = c.rgb;</span><br><span class="line">            o.Alpha = c.a;</span><br><span class="line">            o.Normal = UnpackNormal(tex2D(_BumpMap, IN.uv_BumpMap));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        half4 LightingCustomLambert (SurfaceOutput s, half3 lightDir, half atten)</span><br><span class="line">        &#123;</span><br><span class="line">            half NdotL = dot(s.Normal, lightDir);</span><br><span class="line">            half4 c;</span><br><span class="line">            c.rgb = s.Albedo * _LightColor0 * NdotL * atten;</span><br><span class="line">            c.a = s.Alpha;</span><br><span class="line">            return c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        void mycolor (Input IN, SurfaceOutput o, inout float4 color)</span><br><span class="line">        &#123;</span><br><span class="line">            color *= _ColorTint;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç„¶å Unity å®šä¹‰äº†é¡¶ç‚¹ç€è‰²å™¨åˆ°ç‰‡å…ƒç€è‰²å™¨çš„æ’å€¼ç»“æ„ä½“ï¼ˆå³é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºç»“æ„ä½“ï¼‰ v2f_surfã€‚Unityä½¿ç”¨#ifdefè¯­å¥æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†å…‰ç…§çº¹ç†ï¼Œå¹¶ä¸ºä¸åŒçš„æƒ…å†µç”Ÿæˆä¸åŒçš„ç»“æ„ä½“ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">// vertex-to-fragment interpolation data</span><br><span class="line">// no lightmaps:</span><br><span class="line">#ifndef LIGHTMAP_ON</span><br><span class="line">// half-precision fragment shader registers:</span><br><span class="line">#ifdef UNITY_HALF_PRECISION_FRAGMENT_SHADER_REGISTERS</span><br><span class="line">struct v2f_surf &#123;</span><br><span class="line">  UNITY_POSITION(pos);</span><br><span class="line">  float4 pack0 : TEXCOORD0; // _MainTex _BumpMap</span><br><span class="line">  float4 tSpace0 : TEXCOORD1;</span><br><span class="line">  float4 tSpace1 : TEXCOORD2;</span><br><span class="line">  float4 tSpace2 : TEXCOORD3;</span><br><span class="line">  fixed3 vlight : TEXCOORD4; // ambient/SH/vertexlights</span><br><span class="line">  UNITY_LIGHTING_COORDS(5,6)</span><br><span class="line">  #if SHADER_TARGET &gt;= 30</span><br><span class="line">  float4 lmap : TEXCOORD7;</span><br><span class="line">  #endif</span><br><span class="line">  UNITY_VERTEX_INPUT_INSTANCE_ID</span><br><span class="line">  UNITY_VERTEX_OUTPUT_STEREO</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">// high-precision fragment shader registers:</span><br><span class="line">#ifndef UNITY_HALF_PRECISION_FRAGMENT_SHADER_REGISTERS</span><br><span class="line">struct v2f_surf &#123;</span><br><span class="line">  UNITY_POSITION(pos);</span><br><span class="line">  float4 pack0 : TEXCOORD0; // _MainTex _BumpMap</span><br><span class="line">  float4 tSpace0 : TEXCOORD1;</span><br><span class="line">  float4 tSpace1 : TEXCOORD2;</span><br><span class="line">  float4 tSpace2 : TEXCOORD3;</span><br><span class="line">  fixed3 vlight : TEXCOORD4; // ambient/SH/vertexlights</span><br><span class="line">  UNITY_SHADOW_COORDS(5)</span><br><span class="line">  #if SHADER_TARGET &gt;= 30</span><br><span class="line">  float4 lmap : TEXCOORD6;</span><br><span class="line">  #endif</span><br><span class="line">  UNITY_VERTEX_INPUT_INSTANCE_ID</span><br><span class="line">  UNITY_VERTEX_OUTPUT_STEREO</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">#endif</span><br><span class="line">// with lightmaps:</span><br><span class="line">#ifdef LIGHTMAP_ON</span><br><span class="line">// half-precision fragment shader registers:</span><br><span class="line">#ifdef UNITY_HALF_PRECISION_FRAGMENT_SHADER_REGISTERS</span><br><span class="line">struct v2f_surf &#123;</span><br><span class="line">  UNITY_POSITION(pos);</span><br><span class="line">  float4 pack0 : TEXCOORD0; // _MainTex _BumpMap</span><br><span class="line">  float4 tSpace0 : TEXCOORD1;</span><br><span class="line">  float4 tSpace1 : TEXCOORD2;</span><br><span class="line">  float4 tSpace2 : TEXCOORD3;</span><br><span class="line">  float4 lmap : TEXCOORD4;</span><br><span class="line">  UNITY_LIGHTING_COORDS(5,6)</span><br><span class="line">  UNITY_VERTEX_INPUT_INSTANCE_ID</span><br><span class="line">  UNITY_VERTEX_OUTPUT_STEREO</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">// high-precision fragment shader registers:</span><br><span class="line">#ifndef UNITY_HALF_PRECISION_FRAGMENT_SHADER_REGISTERS</span><br><span class="line">struct v2f_surf &#123;</span><br><span class="line">  UNITY_POSITION(pos);</span><br><span class="line">  float4 pack0 : TEXCOORD0; // _MainTex _BumpMap</span><br><span class="line">  float4 tSpace0 : TEXCOORD1;</span><br><span class="line">  float4 tSpace1 : TEXCOORD2;</span><br><span class="line">  float4 tSpace2 : TEXCOORD3;</span><br><span class="line">  float4 lmap : TEXCOORD4;</span><br><span class="line">  UNITY_SHADOW_COORDS(5)</span><br><span class="line">  UNITY_VERTEX_INPUT_INSTANCE_ID</span><br><span class="line">  UNITY_VERTEX_OUTPUT_STEREO</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<p>pack0å­˜å‚¨äº†ä¸»çº¹ç†å’Œæ³•çº¿çº¹ç†çš„é‡‡æ ·åæ ‡ï¼ŒtSpace0ã€tSpace1ã€tSpace2æ˜¯åˆ‡çº¿ç©ºé—´å˜æ¢ä¸–ç•Œç©ºé—´çš„çŸ©é˜µä»¥åŠä¸–ç•Œåæ ‡ï¼Œvlightæ˜¯é€é¡¶ç‚¹å’ŒSHå…‰ç…§çš„ç»“æœï¼Œåœ¨é¡¶ç‚¹ç€è‰²å™¨è®¡ç®—å¹¶åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸åŸå…‰ç…§ç»“æœå åŠ </p>
</li>
<li>
<p>éšå Unity å®šä¹‰äº†çœŸæ­£çš„é¡¶ç‚¹ç€è‰²å™¨ï¼ˆé¦–å…ˆä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„é¡¶ç‚¹ä¿®æ”¹å‡½æ•°ï¼‰ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">// vertex shader</span><br><span class="line">v2f_surf vert_surf (appdata_full v) &#123;</span><br><span class="line">  UNITY_SETUP_INSTANCE_ID(v);</span><br><span class="line">  v2f_surf o;</span><br><span class="line">  UNITY_INITIALIZE_OUTPUT(v2f_surf,o);</span><br><span class="line">  UNITY_TRANSFER_INSTANCE_ID(v,o);</span><br><span class="line">  UNITY_INITIALIZE_VERTEX_OUTPUT_STEREO(o);</span><br><span class="line">  myvert (v);</span><br><span class="line">  o.pos = UnityObjectToClipPos(v.vertex);</span><br><span class="line">  o.pack0.xy = TRANSFORM_TEX(v.texcoord, _MainTex);</span><br><span class="line">  o.pack0.zw = TRANSFORM_TEX(v.texcoord, _BumpMap);</span><br><span class="line">  float3 worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;</span><br><span class="line">  float3 worldNormal = UnityObjectToWorldNormal(v.normal);</span><br><span class="line">  fixed3 worldTangent = UnityObjectToWorldDir(v.tangent.xyz);</span><br><span class="line">  fixed tangentSign = v.tangent.w * unity_WorldTransformParams.w;</span><br><span class="line">  fixed3 worldBinormal = cross(worldNormal, worldTangent) * tangentSign;</span><br><span class="line">  o.tSpace0 = float4(worldTangent.x, worldBinormal.x, worldNormal.x, worldPos.x);</span><br><span class="line">  o.tSpace1 = float4(worldTangent.y, worldBinormal.y, worldNormal.y, worldPos.y);</span><br><span class="line">  o.tSpace2 = float4(worldTangent.z, worldBinormal.z, worldNormal.z, worldPos.z);</span><br><span class="line">  #ifdef DYNAMICLIGHTMAP_ON</span><br><span class="line">  o.lmap.zw = v.texcoord2.xy * unity_DynamicLightmapST.xy + unity_DynamicLightmapST.zw;</span><br><span class="line">  #endif</span><br><span class="line">  #ifdef LIGHTMAP_ON</span><br><span class="line">  o.lmap.xy = v.texcoord1.xy * unity_LightmapST.xy + unity_LightmapST.zw;</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">  // SH/ambient and vertex lights</span><br><span class="line">  #ifndef LIGHTMAP_ON</span><br><span class="line">  #if UNITY_SHOULD_SAMPLE_SH &amp;&amp; !UNITY_SAMPLE_FULL_SH_PER_PIXEL</span><br><span class="line">  float3 shlight = ShadeSH9 (float4(worldNormal,1.0));</span><br><span class="line">  o.vlight = shlight;</span><br><span class="line">  #else</span><br><span class="line">  o.vlight = 0.0;</span><br><span class="line">  #endif</span><br><span class="line">  #ifdef VERTEXLIGHT_ON</span><br><span class="line">  o.vlight += Shade4PointLights (</span><br><span class="line">    unity_4LightPosX0, unity_4LightPosY0, unity_4LightPosZ0,</span><br><span class="line">    unity_LightColor[0].rgb, unity_LightColor[1].rgb, unity_LightColor[2].rgb, unity_LightColor[3].rgb,</span><br><span class="line">    unity_4LightAtten0, worldPos, worldNormal );</span><br><span class="line">  #endif // VERTEXLIGHT_ON</span><br><span class="line">  #endif // !LIGHTMAP_ON</span><br><span class="line"></span><br><span class="line">  UNITY_TRANSFER_LIGHTING(o,v.texcoord1.xy); // pass shadow and, possibly, light cookie coordinates to pixel shader</span><br><span class="line">  return o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ…å«äº†å˜é‡çš„è®¡ç®—å’Œåˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†å…‰ç…§æ˜ å°„å’ŒåŠ¨æ€å…‰ç…§æ˜ å°„ï¼Œå¹¶åœ¨éœ€è¦æ—¶æŠŠä¸¤ç§å…‰ç…§çº¹ç†çš„é‡‡æ ·åæ ‡è®¡ç®—ç»“æœå‚¨å­˜åœ¨o.lmapä¸­ï¼Œå¦‚æœæ²¡æœ‰å…‰ç…§æ˜ å°„å°±è®¡ç®—é¡¶ç‚¹çš„SHå…‰ç…§ï¼Œç»“æœå‚¨å­˜åœ¨o.vlightï¼Œä»¥åŠå››ä¸ªæœ€é‡è¦çš„é€é¡¶ç‚¹å…‰ç…§</p>
</li>
<li>
<p>åœ¨ Pass çš„æœ€åï¼ŒUnity å®šä¹‰äº†çœŸæ­£çš„ç‰‡å…ƒç€è‰²å™¨ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">// fragment shader</span><br><span class="line"> fixed4 frag_surf (v2f_surf IN) : SV_Target &#123;</span><br><span class="line">   UNITY_SETUP_INSTANCE_ID(IN);</span><br><span class="line">   UNITY_SETUP_STEREO_EYE_INDEX_POST_VERTEX(IN);</span><br><span class="line">   // prepare and unpack data</span><br><span class="line">   Input surfIN;</span><br><span class="line">   #ifdef FOG_COMBINED_WITH_TSPACE</span><br><span class="line">     UNITY_RECONSTRUCT_TBN(IN);</span><br><span class="line">   #else</span><br><span class="line">     UNITY_EXTRACT_TBN(IN);</span><br><span class="line">   #endif</span><br><span class="line">   UNITY_INITIALIZE_OUTPUT(Input,surfIN);</span><br><span class="line">   surfIN.uv_MainTex.x = 1.0;</span><br><span class="line">   surfIN.uv_BumpMap.x = 1.0;</span><br><span class="line">   surfIN.uv_MainTex = IN.pack0.xy;</span><br><span class="line">   surfIN.uv_BumpMap = IN.pack0.zw;</span><br><span class="line">   float3 worldPos = float3(IN.tSpace0.w, IN.tSpace1.w, IN.tSpace2.w);</span><br><span class="line">   #ifndef USING_DIRECTIONAL_LIGHT</span><br><span class="line">     fixed3 lightDir = normalize(UnityWorldSpaceLightDir(worldPos));</span><br><span class="line">   #else</span><br><span class="line">     fixed3 lightDir = _WorldSpaceLightPos0.xyz;</span><br><span class="line">   #endif</span><br><span class="line">   #ifdef UNITY_COMPILER_HLSL</span><br><span class="line">   SurfaceOutput o = (SurfaceOutput)0;</span><br><span class="line">   #else</span><br><span class="line">   SurfaceOutput o;</span><br><span class="line">   #endif</span><br><span class="line">   o.Albedo = 0.0;</span><br><span class="line">   o.Emission = 0.0;</span><br><span class="line">   o.Specular = 0.0;</span><br><span class="line">   o.Alpha = 0.0;</span><br><span class="line">   o.Gloss = 0.0;</span><br><span class="line">   fixed3 normalWorldVertex = fixed3(0,0,1);</span><br><span class="line">   o.Normal = fixed3(0,0,1);</span><br><span class="line"> </span><br><span class="line">   // call surface function</span><br><span class="line">   surf (surfIN, o);</span><br><span class="line"> </span><br><span class="line">   // compute lighting &amp; shadowing factor</span><br><span class="line">   UNITY_LIGHT_ATTENUATION(atten, IN, worldPos)</span><br><span class="line">   fixed4 c = 0;</span><br><span class="line">   float3 worldN;</span><br><span class="line">   worldN.x = dot(_unity_tbn_0, o.Normal);</span><br><span class="line">   worldN.y = dot(_unity_tbn_1, o.Normal);</span><br><span class="line">   worldN.z = dot(_unity_tbn_2, o.Normal);</span><br><span class="line">   worldN = normalize(worldN);</span><br><span class="line">   o.Normal = worldN;</span><br><span class="line">   #ifndef LIGHTMAP_ON</span><br><span class="line">   c.rgb += o.Albedo * IN.vlight;</span><br><span class="line">   #endif // !LIGHTMAP_ON</span><br><span class="line"> </span><br><span class="line">   // lightmaps</span><br><span class="line">   #ifdef LIGHTMAP_ON</span><br><span class="line">     #if DIRLIGHTMAP_COMBINED</span><br><span class="line">       // directional lightmaps</span><br><span class="line">       fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span><br><span class="line">       fixed4 lmIndTex = UNITY_SAMPLE_TEX2D_SAMPLER(unity_LightmapInd, unity_Lightmap, IN.lmap.xy);</span><br><span class="line">       half3 lm = DecodeDirectionalLightmap (DecodeLightmap(lmtex), lmIndTex, o.Normal);</span><br><span class="line">     #else</span><br><span class="line">       // single lightmap</span><br><span class="line">       fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span><br><span class="line">       fixed3 lm = DecodeLightmap (lmtex);</span><br><span class="line">     #endif</span><br><span class="line"> </span><br><span class="line">   #endif // LIGHTMAP_ON</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   // realtime lighting: call lighting function</span><br><span class="line">   #ifndef LIGHTMAP_ON</span><br><span class="line">   c += LightingCustomLambert (o, lightDir, atten);</span><br><span class="line">   #else</span><br><span class="line">     c.a = o.Alpha;</span><br><span class="line">   #endif</span><br><span class="line"> </span><br><span class="line">   #ifdef LIGHTMAP_ON</span><br><span class="line">     // combine lightmaps with realtime shadows</span><br><span class="line">     #ifdef SHADOWS_SCREEN</span><br><span class="line">       #if defined(UNITY_LIGHTMAP_DLDR_ENCODING)</span><br><span class="line">       c.rgb += o.Albedo * min(lm, atten*2);</span><br><span class="line">       #else</span><br><span class="line">       c.rgb += o.Albedo * max(min(lm,(atten*2)*lmtex.rgb), lm*atten);</span><br><span class="line">       #endif</span><br><span class="line">     #else // SHADOWS_SCREEN</span><br><span class="line">       c.rgb += o.Albedo * lm;</span><br><span class="line">     #endif // SHADOWS_SCREEN</span><br><span class="line">   #endif // LIGHTMAP_ON</span><br><span class="line"> </span><br><span class="line">   #ifdef DYNAMICLIGHTMAP_ON</span><br><span class="line">   fixed4 dynlmtex = UNITY_SAMPLE_TEX2D(unity_DynamicLightmap, IN.lmap.zw);</span><br><span class="line">   c.rgb += o.Albedo * DecodeRealtimeLightmap (dynlmtex);</span><br><span class="line">   #endif</span><br><span class="line"> </span><br><span class="line">   mycolor (surfIN, o, c);</span><br><span class="line">   UNITY_OPAQUE_ALPHA(c.a);</span><br><span class="line">   return c;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæ˜¯HLSLï¼Œåˆ™ä½¿ç”¨æ›´ä¸¥æ ¼çš„å£°æ˜æ–¹å¼æ¥å£°æ˜SurfaceOutputç»“æ„ä½“</li>
<li>å…ˆå¯¹è¡¨é¢å±æ€§è¿›è¡Œåˆå§‹åŒ–ï¼Œå†ç”¨è¡¨é¢å‡½æ•°surfæ¥å¡«å……è¿™äº›è¡¨é¢å±æ€§</li>
<li>è¿›è¡Œå…‰ç…§è®¡ç®—</li>
<li>åˆ¤æ–­æ˜¯å¦ä½¿ç”¨å…‰ç…§æ˜ å°„ï¼ˆç”Ÿæˆçš„ä»£ç å¥½åƒä¸ä¹¦ä¸­æœ‰å†²çªï¼Œä»¥ä»£ç ä¸ºä¸»ï¼‰
<ul>
<li>ä¸ä½¿ç”¨ï¼Œå°±æŠŠé€é¡¶ç‚¹çš„å…‰ç…§ç»“æœå åŠ åˆ°è¾“å‡ºé¢œè‰²ä¸­</li>
<li>ä½¿ç”¨ï¼Œä½¿ç”¨ä¹‹å‰è®¡ç®—çš„å…‰ç…§çº¹ç†é‡‡æ ·åæ ‡ï¼Œå¯¹å…‰ç…§çº¹ç†è¿›è¡Œé‡‡æ ·å¹¶è§£ç ï¼Œå¾—åˆ°å…‰ç…§çº¹ç†ä¸­çš„å…‰ç…§ç»“æœ</li>
</ul>
</li>
<li>å¦‚æœä½¿ç”¨äº†åŠ¨æ€å…‰ç…§æ˜ å°„ï¼Œè¿˜ä¼šå¯¹åŠ¨æ€å…‰ç…§çº¹ç†è¿›è¡Œé‡‡æ ·</li>
<li>è°ƒç”¨è‡ªå®šä¹‰é¢œè‰²ä¿®æ”¹å‡½æ•°</li>
<li>UNITY_OPAQUE_ALPHA æ˜¯ç”¨æ¥é‡ç½®é€æ˜é€šé“ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸é€æ˜ç±»å‹éƒ½ä¼šè¢«é‡ç½®ï¼Œ</li>
</ul>
</li>
</ol>
<h3 id="Surface-Shader-çš„ç¼ºç‚¹">Surface Shader çš„ç¼ºç‚¹</h3>
<p>è¡¨é¢ç€è‰²å™¨ç»™æˆ‘ä»¬å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä½†ç¼ºç‚¹ä¹Ÿä¸å°‘ï¼š</p>
<ul>
<li>ä»»ä½•åœ¨è¡¨é¢ç€è‰²å™¨ä¸­å®Œæˆçš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥åœ¨é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ä¸­é‡ç°ï¼Œä½†åè¿‡æ¥ä¸æˆç«‹ã€‚</li>
<li>è¡¨é¢ç€è‰²å™¨å¾€å¾€ä¼šå¯¹æ€§èƒ½é€ æˆå½±å“ã€‚ä¾‹å¦‚ç§»åŠ¨å¹³å°çš„ç‰ˆæœ¬ Mobile/Diffuse ç­‰åªæ˜¯å»æ‰äº†é¢å¤–çš„é€åƒç´  Passã€ä¸è®¡ç®—å…¨å±€å…‰ç…§ç­‰ï¼Œä½†æ²¡æœ‰æ·±å±‚çš„ä¼˜åŒ–ã€‚</li>
<li>è¡¨é¢ç€è‰²å™¨æ— æ³•å®Œæˆä¸€äº›è‡ªå®šä¹‰çš„æ¸²æŸ“æ•ˆæœã€‚ä¾‹å¦‚ 10.2.2 èŠ‚ä¸­çš„é€æ˜ç»ç’ƒæ•ˆæœã€‚</li>
</ul>
<p>å› æ­¤ï¼Œç»™å‡ºä¸€äº›å»ºè®®ä¾›è¯»è€…å‚è€ƒï¼š</p>
<ul>
<li>å¦‚æœä½ éœ€è¦å’Œå„ç§å…‰æºæ‰“äº¤é“ï¼Œå°¤å…¶æ˜¯æƒ³ç”¨ Unity ä¸­çš„å…¨å±€å…‰ç…§ã€‚å¯ä»¥ä½¿ç”¨è¡¨é¢ç€è‰²å™¨ï¼Œä½†è¦æ—¶åˆ»å°å¿ƒå®ƒçš„æ€§èƒ½ï¼›</li>
<li>å¦‚æœä½ éœ€è¦å¤„ç†çš„å…‰æºæ•°ç›®éå¸¸å°‘ï¼Œä¾‹å¦‚åªæœ‰ä¸€ä¸ªå¹³è¡Œå…‰ï¼Œé‚£ä¹ˆä½¿ç”¨é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨æ›´å¥½ï¼›</li>
<li>æœ€é‡è¦çš„æ˜¯ï¼Œå¦‚æœæœ‰å¾ˆå¤šè‡ªå®šä¹‰çš„æ¸²æŸ“æ•ˆæœï¼Œé‚£ä¹ˆè¯·é€‰æ‹©é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ã€‚</li>
</ul>

      </section>

      
      
        <nav class="article-nav">
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/posts/55aeb08e/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">Unity Shaderå…¥é—¨ç²¾è¦-ç« èŠ‚20 è¿˜æœ‰æ›´å¤šå†…å®¹å—</h2>
        </a>
      
      <div class="card-text--row">Newer</div>
    </div>
  </article>
</div>
          
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/posts/9ebc2fb9/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">Unity Shaderå…¥é—¨ç²¾è¦-ç« èŠ‚16 Unityä¸­çš„æ¸²æŸ“ä¼˜åŒ–æŠ€æœ¯</h2>
        </a>
      
      <div class="card-text--row">Older</div>
    </div>
  </article>
</div>
          
        </nav>
      

      <section class="page-message-container layout-padding">
        


  
  
    <div class="valine-container comments-container content-padding--primary soft-size--large soft-style--box">
      <div id="valine_thread" class="valine-thread"></div>
    </div>
    <script type="text/javascript" src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script type="text/javascript" src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <script type="text/javascript">
      new Valine({
        el: "#valine_thread",
        appId: "ha5sLVmWShqJe8avY2CWYZlD-gzGzoHsz",
        appKey: "4p6G2ba4Q1lK0tPKyeZRmhUu",
        avatar: "mm",
        placeholder: "éšä¾¿è¯´ç‚¹ä»€ä¹ˆå­ï½",
        notify: true,
        visitor: true,
        pageSize: 10,
      });
    </script>
  

  
  


      </section>
    </div>
    <div class="widget-info">
      <section class="widget-author widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-body">
    
      <img src="https://raw.githubusercontent.com/kiodyd/image-host/main/PicGo/20230104205054.png" class="soft-size--round soft-style--box" alt="kio0o0">
    
    
      <h2>kio0o0</h2>
    
    
      <p>å¦‚æœå¯ä»¥åšåˆ°ä¸æ‡‚å°±é—®ï¼Œåšä¸åˆ°çš„äº‹æƒ…å°±æ‹’ç»ï¼Œæˆ–è®¸å¯ä»¥æ´»å¾—æ›´è½»æ¾ç‚¹</p>
    

    <div class="count-box">
      <div class="count-box--item">
        <svg class="icon icon-article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M240.51564747 647.74217627h196.07203239c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806V165.10332731c0-33.18142087-30.16492806-60.32985613-60.32985612-60.32985611H245.04038668C225.43318342 104.7734712 210.35071939 119.85593522 210.35071939 139.46313845V617.57724821c0 16.59071043 13.57421762 30.16492806 30.16492808 30.16492806z m663.62841731-452.47392089v482.63884894c0 33.18142087-27.14843525 60.32985613-60.32985612 60.32985613H180.18579134c-33.18142087 0-60.32985613-27.14843525-60.32985612-60.32985613V195.26825538c-49.77213131 0-90.49478418 40.72265287-90.49478417 90.49478417v452.4739209c0 49.77213131 40.72265287 90.49478418 90.49478417 90.49478417h286.56681657c16.59071043 0 30.16492806 13.57421762 30.16492807 30.16492807s13.57421762 30.16492806 30.16492805 30.16492806h90.49478418c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806s13.57421762-30.16492806 30.16492807-30.16492807h286.56681657c49.77213131 0 90.49478418-40.72265287 90.49478417-90.49478417V285.76303955c0-49.77213131-40.72265287-90.49478418-90.49478417-90.49478417zM587.41232014 647.74217627h191.54729318c19.60720323 0 34.68966726-15.08246403 34.68966729-34.68966727V134.93839925c0-16.59071043-13.57421762-30.16492806-30.16492808-30.16492805H617.57724821c-30.16492806 0-60.32985613 27.14843525-60.32985612 60.32985611v452.4739209c0 16.59071043 13.57421762 30.16492806 30.16492805 30.16492806z" fill="currentColor"></path>
</svg>
        <span>100</span>
      </div>
      <div class="count-box--item">
        <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
        6
      </div>
      <div class="count-box--item">
        <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
        26
      </div>
    </div>
  </div>
</section>

      

      
<section class="widet-notice widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-notice" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 945.02305225v28.15620663a24.27259221 24.27259221 0 0 1-24.27259221 24.27259335H394.0352a48.54518557 48.54518557 0 0 1-41.74885888-23.78714112l-110.68302222-184.47170332a132.04290333 132.04290333 0 0 1-17.47626667-48.54518557h118.4502511a200.97706667 200.97706667 0 0 1 76.21594113 14.56355556l20.38897777 133.49925888a48.54518557 48.54518557 0 0 0 36.40888888 27.67075555l16.01991111 2.91271112a24.27259221 24.27259221 0 0 1 20.38897778 25.72894889zM997.45185223 463.45481443a194.18074112 194.18074112 0 0 1-38.8361489 116.50844445 24.75804445 24.75804445 0 0 1-36.4088889 0l-34.95253333-34.95253333a24.27259221 24.27259221 0 0 1-2.91271111-30.58346667 97.09036999 97.09036999 0 0 0 0-106.79940665 24.27259221 24.27259221 0 0 1 2.91271111-30.58346666l34.95253333-34.95253334a24.75804445 24.75804445 0 0 1 18.93262223-7.28177777 26.2144 26.2144 0 0 1 17.47626667 9.70903665A194.18074112 194.18074112 0 0 1 997.45185223 463.45481443z m-194.18074112-388.36148111v776.72296335a48.54518557 48.54518557 0 0 1-48.54518556 48.54518443h-28.64165888a48.54518557 48.54518557 0 0 1-33.98163001-14.07810332l-145.63555556-143.20829668A291.27111111 291.27111111 0 0 0 342.57730333 657.63555556H172.18370333a145.63555556 145.63555556 0 0 1-145.63555556-145.63555556v-97.09036999a145.63555556 145.63555556 0 0 1 145.63555556-145.63555556h170.3936a291.27111111 291.27111111 0 0 0 206.31703779-85.43952668l145.63555555-143.20829554a48.54518557 48.54518557 0 0 1 33.98162888-14.07810446H754.72592555a48.54518557 48.54518557 0 0 1 48.54518556 48.54518555z" fill="currentColor"></path>
</svg>
    <span>NOTICE</span>
  </div>
  <div class="widget-body">
    <p>æ­£åœ¨åŠªåŠ›å­¦ä¹ å›¾å½¢å­¦ä¸­ï¼</p>
  </div>
</section>


      <section class="widget-categorys widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
    <span>CATEGORYS</span>
  </div>
  <div class="widget-body">
    <ul class="categorys-list">
      
        <li class="categorys-list-item">
          <a href="/categories/%E5%B7%A5%E4%BD%9C/">
            å·¥ä½œ (1)
          </a>
        </li>
      
        <li class="categorys-list-item">
          <a href="/categories/%E8%BD%AF%E4%BB%B6/">
            è½¯ä»¶ (2)
          </a>
        </li>
      
        <li class="categorys-list-item">
          <a href="/categories/%E6%9D%82%E8%B0%88/">
            æ‚è°ˆ (1)
          </a>
        </li>
      
        <li class="categorys-list-item">
          <a href="/categories/%E7%A1%AC%E4%BB%B6/">
            ç¡¬ä»¶ (2)
          </a>
        </li>
      
        <li class="categorys-list-item">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/">
            å­¦ä¹  (93)
          </a>
        </li>
      
        <li class="categorys-list-item">
          <a href="/categories/%E5%8A%A8%E7%94%BB/">
            åŠ¨ç”» (1)
          </a>
        </li>
      
    </ul>
  </div>
</section>

      <section class="widget-tags widget-item  layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
    <span>TAGS</span>
  </div>
  <div class="widget-body">
    <div class="tags-cloud">
      <a href="/tags/AMD-OS-X/" style="font-size: 10px;" class="tags-cloud-0">AMD OS X</a> <a href="/tags/C-%E7%AC%94%E8%AE%B0/" style="font-size: 16.67px;" class="tags-cloud-7">C#ç¬”è®°</a> <a href="/tags/Github%E6%8A%80%E5%B7%A7/" style="font-size: 10px;" class="tags-cloud-0">GithubæŠ€å·§</a> <a href="/tags/Hackintosh/" style="font-size: 10px;" class="tags-cloud-0">Hackintosh</a> <a href="/tags/Lua%E7%AC%94%E8%AE%B0/" style="font-size: 10px;" class="tags-cloud-0">Luaç¬”è®°</a> <a href="/tags/Unity/" style="font-size: 15.56px;" class="tags-cloud-6">Unity</a> <a href="/tags/Unity-Shader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81/" style="font-size: 17.78px;" class="tags-cloud-8">Unity Shaderå…¥é—¨ç²¾è¦</a> <a href="/tags/c-%E7%AC%94%E8%AE%B0/" style="font-size: 12.22px;" class="tags-cloud-2">c++ç¬”è®°</a> <a href="/tags/cocos/" style="font-size: 10px;" class="tags-cloud-0">cocos</a> <a href="/tags/c%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0/" style="font-size: 11.11px;" class="tags-cloud-1">cè¯­è¨€ç¬”è®°</a> <a href="/tags/drcom/" style="font-size: 10px;" class="tags-cloud-0">drcom</a> <a href="/tags/shader/" style="font-size: 10px;" class="tags-cloud-0">shader</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E8%AE%BE%E8%AE%A1/" style="font-size: 13.33px;" class="tags-cloud-3">ä»£ç è®¾è®¡</a> <a href="/tags/%E5%8D%A1%E9%80%9A%E6%B8%B2%E6%9F%93/" style="font-size: 10px;" class="tags-cloud-0">å¡é€šæ¸²æŸ“</a> <a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 20px;" class="tags-cloud-10">å›¾å½¢å­¦</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;" class="tags-cloud-0">å­¦ä¹ </a> <a href="/tags/%E5%B9%B3%E6%9D%BF/" style="font-size: 11.11px;" class="tags-cloud-1">å¹³æ¿</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 14.44px;" class="tags-cloud-4">æ€§èƒ½ä¼˜åŒ–</a> <a href="/tags/%E6%90%9E%E6%9C%BA/" style="font-size: 10px;" class="tags-cloud-0">ææœº</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;" class="tags-cloud-0">æ•°æ®ç»“æ„</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 10px;" class="tags-cloud-0">æ¸¸æˆå¼€å‘</a> <a href="/tags/%E7%99%BE%E4%BA%BA%E8%AE%A1%E5%88%92/" style="font-size: 18.89px;" class="tags-cloud-9">ç™¾äººè®¡åˆ’</a> <a href="/tags/%E8%A7%A3%E9%A2%98/" style="font-size: 10px;" class="tags-cloud-0">è§£é¢˜</a> <a href="/tags/%E8%AE%A1%E5%88%92/" style="font-size: 10px;" class="tags-cloud-0">è®¡åˆ’</a> <a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="font-size: 10px;" class="tags-cloud-0">è·¯ç”±å™¨</a> <a href="/tags/%E9%87%8D%E6%9E%84/" style="font-size: 13.33px;" class="tags-cloud-3">é‡æ„</a>
    </div>
  </div>
</section>
    </div>
  </article>
</div>

    <!-- footer container -->
<footer id="footer" class="footer">
  <div class="footer-container">
    
    <div class="social-icons">
      
        
      
        
      
        
      
        
          <a href="https://github.com/kiodyd" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
</svg>
          </a>
        
      
        
      
    </div>
     
    <p>&copy; 2024 <a href="/" target="_blank">kio0o0</a></p>

    

    <p>Powered by <a href="https://hexo.io" target="_blank" rel="noopener noreferrer">Hexo</a> Theme - <a href="https://github.com/miiiku/flex-block" target="_blank" rel="noopener noreferrer author">flex-block</a></p>

    <p>
      <a href="javascript:;" id="theme-light">ğŸŒ æµ…è‰²</a>
      <a href="javascript:;" id="theme-dark">ğŸŒ› æ·±è‰²</a>
      <a href="javascript:;" id="theme-auto">ğŸ¤–ï¸ è‡ªåŠ¨</a>
    </p>
  </div>
</footer>
  </div>

  <div class="back-to-top-fixed soft-size--round soft-style--box">
    <svg class="icon icon-back-to-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <path d="M725.333333 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333333c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l213.333333 213.333333c17.066667 17.066667 17.066667 42.666667 0 59.733333C746.666667 422.4 738.133333 426.666667 725.333333 426.666667z"></path>
      <path d="M298.666667 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l213.333333-213.333333c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333333C320 422.4 311.466667 426.666667 298.666667 426.666667z"></path>
      <path d="M512 896c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 878.933333 537.6 896 512 896z"></path>
    </svg>
  </div>

  
  <!-- aplayer -->


<!-- dplayer -->




  


  


  




<script src="/js/script.js"></script>


  
  <!-- å°¾éƒ¨ç”¨æˆ·è‡ªå®šä¹‰ç›¸å…³å†…å®¹ -->
</body>
</html>
